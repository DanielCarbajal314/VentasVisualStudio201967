<div class="row col-12" id="app">
    <div class="col-5">                                 
        <div class="form-group">
            <label>DNI</label>
            <input type="text" class="form-control" v-model="DNI" />
        </div>
        <div class="form-group">
            <label>Nombre Completo</label>
            <input type="text" class="form-control" v-model="NombreCompleto"/>
        </div>
        <div class="form-group">
            <label>Sexo</label>
            <select class="form-control" v-model="Sexo">
                <option>Masculino</option>
                <option>Femenino</option>
            </select>
        </div>
        <div class="form-group">
            <label>Fecha de Nacimiento</label>
            <input type="date" class="form-control" v-model="FechaNacimiento"/>
        </div>
        <div class="form-group">
            <label>Direccion</label>
            <input type="text" class="form-control" v-model="Direccion" />
        </div>
        <div class="form-group">
            <label>Ubigeo</label>
            <input type="text" class="form-control" v-model="UBIGEO"/>
        </div>
        <div class="form-group">
            <label>Correo</label>
            <input type="text" class="form-control" v-model="Correo"/>
        </div>
        <div class="form-group">
            <label>Celular</label>
            <input type="text" class="form-control" v-model="Celular"/>
        </div>
        <div class="form-group">
            <button class="btn btn-primary" v-on:click="registrar">Guardar</button>
        </div>
    </div>
    <div class="col-7">
        <table class="table table-bordered table-hover">
            <thead class="thead-dark">
                <tr>
                    <th>Nombre</th>
                    <th>DNI</th>
                    <th>Celulars</th>
                </tr>
            </thead>
            <tbody>
                <tr v-for="cliente in ClientesRegistrados">
                    <td>{{cliente.NombreCompleto}}</td>
                    <td>{{cliente.DNI}}</td>
                    <td>{{cliente.Celular}}</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<script>
    var app = new Vue({
        el: '#app',
        data: {
            NombreCompleto: '',
            DNI: '',
            Direccion: '',
            UBIGEO: '',
            Correo: '',
            Celular: '',
            FechaNacimiento: '',
            Sexo: '',
            ClientesRegistrados: []
        },
        methods: {
            limpiarFormulario: function () {
                this.NombreCompleto = '';
                this.DNI = '';
                this.Direccion = '';
                this.UBIGEO = '';
                this.Correo = '';
                this.Celular = '';
                this.FechaNacimiento = '';
                this.Sexo = '';
            },
            sacaObjetoDelFormulario: function () {
                return {
                    NombreCompleto: this.NombreCompleto,
                    DNI: this.DNI,
                    Direccion: this.Direccion,
                    UBIGEO: this.UBIGEO,
                    Correo: this.Correo,
                    Celular: this.Celular,
                    FechaNacimiento: this.FechaNacimiento,
                    Sexo: this.Sexo
                }
            },
            registrar: function () {
                let data = app.sacaObjetoDelFormulario();
                axios.post('/api/Clientes/Registrar', data)
                    .then(resultado => resultado.data)
                    .then(nuevoCliente => {
                        this.ClientesRegistrados.push(nuevoCliente);
                        this.limpiarFormulario();
                    })
            },
            cargarClientesDelServidor() {
                axios.get('/api/Clientes/ListarTodos')
                    .then(resultado => resultado.data)
                    .then(listaClientes => {
                        this.ClientesRegistrados = listaClientes;
                    })
            }
        }
    })
    app.cargarClientesDelServidor();
</script>